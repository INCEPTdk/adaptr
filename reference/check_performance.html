<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Calculates performance metrics for a trial specification based on
simulation results from the run_trials() function, with bootstrapped
uncertainty measures if requested. Uses extract_results(), which may be
used directly to extract key trial results without summarising. This function
is also used by summary() to calculate the performance metrics presented by
that function."><title>Check performance metrics for trial simulations — check_performance • adaptr</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Check performance metrics for trial simulations — check_performance"><meta property="og:description" content="Calculates performance metrics for a trial specification based on
simulation results from the run_trials() function, with bootstrapped
uncertainty measures if requested. Uses extract_results(), which may be
used directly to extract key trial results without summarising. This function
is also used by summary() to calculate the performance metrics presented by
that function."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">adaptr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.3.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Overview.html">Overview</a>
    <a class="dropdown-item" href="../articles/Basic-examples.html">Basic examples</a>
    <a class="dropdown-item" href="../articles/Advanced-example.html">Advanced example</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/INCEPTdk/adaptr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Check performance metrics for trial simulations</h1>
      <small class="dont-index">Source: <a href="https://github.com/INCEPTdk/adaptr/blob/HEAD/R/check_performance.R" class="external-link"><code>R/check_performance.R</code></a></small>
      <div class="d-none name"><code>check_performance.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculates performance metrics for a trial specification based on
simulation results from the <code><a href="run_trials.html">run_trials()</a></code> function, with bootstrapped
uncertainty measures if requested. Uses <code><a href="extract_results.html">extract_results()</a></code>, which may be
used directly to extract key trial results without summarising. This function
is also used by <code><a href="summary.html">summary()</a></code> to calculate the performance metrics presented by
that function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">check_performance</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  select_strategy <span class="op">=</span> <span class="st">"control if available"</span>,</span>
<span>  select_last_arm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  select_preferences <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  te_comp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  raw_ests <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  final_ests <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  restrict <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  uncertainty <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  n_boot <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  ci_width <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  boot_seed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cores <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>object</dt>
<dd><p><code>trial_results</code> object, output from the <code><a href="run_trials.html">run_trials()</a></code>
function.</p></dd>


<dt>select_strategy</dt>
<dd><p>single character string. If a trial was not stopped
due to superiority (or had only 1 arm remaining, if <code>select_last_arm</code> is
set to <code>TRUE</code> in trial designs with a common <code>control</code> arm; see below),
this parameter specifies which arm will be considered selected when
calculating trial design performance metrics, as described below;
this corresponds to the consequence of an inconclusive trial, i.e., which
arm would then be used in practice.<br>
The following options are available and must be written exactly as below
(case sensitive, cannot be abbreviated):</p><ul><li><p><code>"control if available"</code> (default): selects the <strong>first</strong>
<code>control</code> arm for trials with a common <code>control</code> arm <em><strong>if</strong></em> this
arm is active at end-of-trial, otherwise no arm will be selected. For
trial designs without a common <code>control</code>, no arm will be selected.</p></li>
<li><p><code>"none"</code>: selects no arm in trials not ending with superiority.</p></li>
<li><p><code>"control"</code>: similar to <code>"control if available"</code>, but will throw
an error if used for trial designs without a common <code>control</code> arm.</p></li>
<li><p><code>"final control"</code>: selects the <strong>final</strong> <code>control</code> arm regardless
of whether the trial was stopped for practical equivalence, futility,
or at the maximum sample size; this strategy can only be specified
for trial designs with a common <code>control</code> arm.</p></li>
<li><p><code>"control or best"</code>: selects the <strong>first</strong> <code>control</code> arm if still
active at end-of-trial, otherwise selects the best remaining arm
(defined as the remaining arm with the highest probability of being
the best in the last adaptive analysis conducted). Only works for
trial designs with a common <code>control</code> arm.</p></li>
<li><p><code>"best"</code>: selects the best remaining arm (as described under
<code>"control or best"</code>).</p></li>
<li><p><code>"list or best"</code>: selects the first remaining arm from a specified
list (specified using <code>select_preferences</code>, technically a character
vector). If none of these arms are are active at end-of-trial, the best
remaining arm will be selected (as described above).</p></li>
<li><p><code>"list"</code>: as specified above, but if no arms on the provided list
remain active at end-of-trial, no arm is selected.</p></li>
</ul></dd>


<dt>select_last_arm</dt>
<dd><p>single logical, defaults to <code>FALSE</code>. If <code>TRUE</code>, the
only remaining active arm (the last <code>control</code>) will be selected in trials
with a common <code>control</code> arm ending with <code>equivalence</code> or <code>futility</code>, before
considering the options specified in <code>select_strategy</code>. Must be <code>FALSE</code> for
trial designs without a common <code>control</code> arm.</p></dd>


<dt>select_preferences</dt>
<dd><p>character vector specifying a number of arms used
for selection if one of the <code>"list or best"</code> or <code>"list"</code> options are
specified for <code>select_strategy</code>. Can only contain valid <code>arms</code>
available in the trial.</p></dd>


<dt>te_comp</dt>
<dd><p>character string, treatment-effect comparator. Can be either
<code>NULL</code> (the default) in which case the <strong>first</strong> <code>control</code> arm is used for
trial designs with a common control arm, or a string naming a single trial
<code>arm</code>. Will be used when calculating <code>sq_err_te</code> (the squared error of the
treatment effect comparing the selected arm to the comparator arm, as
described below).</p></dd>


<dt>raw_ests</dt>
<dd><p>single logical. If <code>FALSE</code> (default), the
posterior estimates (<code>post_ests</code> or <code>post_ests_all</code>, see <code><a href="setup_trial.html">setup_trial()</a></code>
and <code><a href="run_trial.html">run_trial()</a></code>) will be used to calculate <code>sq_err</code> (the squared error of
the estimated compared to the specified effect in the selected arm) and
<code>sq_err_te</code> (the squared error of the treatment effect comparing the
selected arm to the comparator arm, as described for <code>te_comp</code> and below).
If <code>TRUE</code>, the raw estimates (<code>raw_ests</code> or <code>raw_ests_all</code>, see
<code><a href="setup_trial.html">setup_trial()</a></code> and <code><a href="run_trial.html">run_trial()</a></code>) will be used instead of the posterior
estimates.</p></dd>


<dt>final_ests</dt>
<dd><p>single logical. If <code>TRUE</code> (recommended) the final estimates
calculated using outcome data from all patients randomised when trials are
stopped are used (<code>post_ests_all</code> or <code>raw_ests_all</code>, see <code><a href="setup_trial.html">setup_trial()</a></code>
and <code><a href="run_trial.html">run_trial()</a></code>); if <code>FALSE</code>, the estimates calculated for each arm when
an arm is stopped (or at the last adaptive analysis if not before) using
data from patients having reach followed up at this time point and not all
patients randomised are used (<code>post_ests</code> or <code>raw_ests</code>, see
<code><a href="setup_trial.html">setup_trial()</a></code> and <code><a href="run_trial.html">run_trial()</a></code>). If <code>NULL</code> (the default), this argument
will be set to <code>FALSE</code> if outcome data are available immediate after
randomisation for all patients (for backwards compatibility, as final
posterior estimates may vary slightly in this situation, even if using the
same data); otherwise it will be said to <code>TRUE</code>. See <code><a href="setup_trial.html">setup_trial()</a></code> for
more details on how these estimates are calculated.</p></dd>


<dt>restrict</dt>
<dd><p>single character string or <code>NULL</code>. If <code>NULL</code> (default),
results are summarised for all simulations; if <code>"superior"</code>, results are
summarised for simulations ending with superiority only; if <code>"selected"</code>,
results are summarised for simulations ending with a selected arm only
(according to the specified arm selection strategy for simulations not
ending with superiority). Some summary measures (e.g., <code>prob_conclusive</code>)
have substantially different interpretations if restricted, but are
calculated nonetheless.</p></dd>


<dt>uncertainty</dt>
<dd><p>single logical; if <code>FALSE</code> (default) uncertainty measures
are not calculated, if <code>TRUE</code>, non-parametric bootstrapping is used to
calculate uncertainty measures.</p></dd>


<dt>n_boot</dt>
<dd><p>single integer (default <code>5000</code>); the number of bootstrap
samples to use if <code>uncertainty = TRUE</code>. Values <code>&lt; 100</code> are not allowed and
values <code>&lt; 1000</code> will lead to a warning, as results are likely to be
unstable in those cases.</p></dd>


<dt>ci_width</dt>
<dd><p>single numeric <code>&gt;= 0</code> and <code>&lt; 1</code>, the width of the
percentile-based bootstrapped confidence intervals. Defaults to <code>0.95</code>,
corresponding to 95% confidence intervals.</p></dd>


<dt>boot_seed</dt>
<dd><p>single integer, <code>NULL</code> (default), or <code>"base"</code>. If a value is
provided, this value will be used to initiate random seeds when
bootstrapping with the global random seed restored after the function has
run. If <code>"base"</code> is specified, the <code>base_seed</code> specified in <code><a href="run_trials.html">run_trials()</a></code>
is used. Regardless of whether simulations are run sequentially or in
parallel, bootstrapped results will be identical if a <code>boot_seed</code> is
specified.</p></dd>


<dt>cores</dt>
<dd><p><code>NULL</code> or single integer. If <code>NULL</code>, a default value set by
<code><a href="setup_cluster.html">setup_cluster()</a></code> will be used to control whether extractions of simulation
results are done in parallel on a default cluster or sequentially in the
main process; if a value has not been specified by <code><a href="setup_cluster.html">setup_cluster()</a></code>,
<code>cores</code> will then be set to the value stored in the global <code>"mc.cores"</code>
option (if previously set by <code>options(mc.cores = &lt;number of cores&gt;</code>), and
<code>1</code> if that option has not been specified.<br>
If <code>cores = 1</code>, computations
will be run sequentially in the primary process, and if <code>cores &gt; 1</code>, a new
parallel cluster will be setup using the <code>parallel</code> library and removed
once the function completes. See <code><a href="setup_cluster.html">setup_cluster()</a></code> for details.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A tidy <code>data.frame</code> with added class <code>trial_performance</code> (to control
the number of digits printed, see <code><a href="print.html">print()</a></code>), with the columns
<code>"metric"</code> (described below), <code>"est"</code> (estimate of each metric), and the
following four columns if <code>uncertainty = TRUE</code>: <code>"err_sd"</code>(bootstrapped
SDs), <code>"err_mad"</code> (bootstrapped MAD-SDs, as described in <code><a href="setup_trial.html">setup_trial()</a></code></p>


<p>and <code><a href="https://rdrr.io/r/stats/mad.html" class="external-link">stats::mad()</a></code>), <code>"lo_ci"</code>, and <code>"hi_ci"</code>, the latter two corresponding
to the lower/upper limits of the percentile-based bootstrapped confidence
intervals. Bootstrap estimates are <strong>not</strong> calculated for the mininum
(<code>_p0</code>) and maximum values (<code>_p100</code>) of <code>size</code>, <code>sum_ys</code>, and <code>ratio_ys</code>,
as non-parametric bootstrapping for mininum/maximum values is not
sensible - bootstrap estimates for these values will be <code>NA</code>.<br></p>


<p>The following performance metrics are calculated:</p><ul><li><p><code>n_summarised</code>: the number of simulations summarised.</p></li>
<li><p><code>size_mean</code>, <code>size_sd</code>, <code>size_median</code>, <code>size_p25</code>, <code>size_p75</code>,
<code>size_p0</code>, <code>size_p100</code>: the mean, standard deviation, median as well as
25-, 75-, 0- (min), and 100- (max) percentiles of the sample sizes
(number of patients randomised in each simulated trial) of the summarised
trial simulations.</p></li>
<li><p><code>sum_ys_mean</code>, <code>sum_ys_sd</code>, <code>sum_ys_median</code>, <code>sum_ys_p25</code>,
<code>sum_ys_p75</code>, <code>sum_ys_p0</code>, <code>sum_ys_p100</code>: the mean, standard deviation,
median as well as 25-, 75-, 0- (min), and 100- (max) percentiles of the
total <code>sum_ys</code> across all arms in the summarised trial simulations (e.g.,
the total number of events in trials with a binary outcome, or the sums
of continuous values for all patients across all arms in trials with a
continuous outcome). Always uses all outcomes from all randomised
patients regardless of whether or not all patients had outcome data
available at the time of trial stopping (corresponding to <code>sum_ys_all</code> in
results from <code><a href="run_trial.html">run_trial()</a></code>).</p></li>
<li><p><code>ratio_ys_mean</code>, <code>ratio_ys_sd</code>, <code>ratio_ys_median</code>, <code>ratio_ys_p25</code>,
<code>ratio_ys_p75</code>, <code>ratio_ys_p0</code>, <code>ratio_ys_p100</code>: the mean, standard
deviation, median as well as 25-, 75-, 0- (min), and 100- (max)
percentiles of the final <code>ratio_ys</code> (<code>sum_ys</code> as described above divided
by the total number of patients randomised) across all arms in the
summarised trial simulations.</p></li>
<li><p><code>prob_conclusive</code>: the proportion (<code>0</code> to <code>1</code>) of conclusive trial
simulations, i.e., simulations not stopped at the maximum sample size
without a superiority, equivalence or futility decision.</p></li>
<li><p><code>prob_superior</code>, <code>prob_equivalence</code>, <code>prob_futility</code>, <code>prob_max</code>: the
proportion (<code>0</code> to <code>1</code>) of trial simulations stopped for superiority,
equivalence, futility or inconclusive at the maximum allowed sample size,
respectively.<br><strong>Note:</strong> Some metrics may not make sense if summarised simulation
results are <code>restricted</code>.</p></li>
<li><p><code>prob_select_*</code>: the selection probabilities for each arm and for no
selection, according to the specified selection strategy. Contains one
element per <code>arm</code>, named <code>prob_select_arm_&lt;arm name&gt;</code> and
<code>prob_select_none</code> for the probability of selecting no arm.</p></li>
<li><p><code>rmse</code>, <code>rmse_te</code>: the root mean squared error of the estimates for
the selected arm and for the treatment effect, as described in
<code><a href="extract_results.html">extract_results()</a></code>.</p></li>
<li><p><code>idp</code>: the ideal design percentage (IDP; 0-100%), see <strong>Details</strong>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The ideal design percentage (IDP) returned is based on
<em>Viele et al, 2020</em> <a href="https://doi.org/10.1177/1740774519877836" class="external-link">doi:10.1177/1740774519877836</a>
  (and also described in
<em>Granholm et al, 2022</em> <a href="https://doi.org/10.1016/j.jclinepi.2022.11.002" class="external-link">doi:10.1016/j.jclinepi.2022.11.002</a>
, which also
describes the other performance measures) and has been adapted to work for
trials with both desirable/undesirable outcomes and non-binary outcomes.
Briefly, the expected outcome is calculated as the sum of the true outcomes
in each arm multiplied by the corresponding selection probabilities (ignoring
simulations with no selected arm). The IDP is then calculated as:</p><ul><li><p>For desirable outcomes (<code>highest_is_best</code> is <code>TRUE</code>):<br><code>100 * (expected outcome - lowest true outcome) / (highest true outcome - lowest true outcome)</code></p></li>
<li><p>For undesirable outcomes (<code>highest_is_best</code> is <code>FALSE</code>):<br><code>100 - IDP calculated for desirable outcomes</code></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="extract_results.html">extract_results()</a></code>, <code><a href="summary.html">summary()</a></code>, <code><a href="plot_convergence.html">plot_convergence()</a></code>,
<code><a href="plot_metrics_ecdf.html">plot_metrics_ecdf()</a></code>, <code><a href="check_remaining_arms.html">check_remaining_arms()</a></code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Setup a trial specification</span></span></span>
<span class="r-in"><span><span class="va">binom_trial</span> <span class="op">&lt;-</span> <span class="fu"><a href="setup_trial_binom.html">setup_trial_binom</a></span><span class="op">(</span>arms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 control <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                                 true_ys <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.20</span>, <span class="fl">0.18</span>, <span class="fl">0.22</span>, <span class="fl">0.24</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                 data_looks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">20</span> <span class="op">*</span> <span class="fl">100</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run 10 simulations with a specified random base seed</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_trials.html">run_trials</a></span><span class="op">(</span><span class="va">binom_trial</span>, n_rep <span class="op">=</span> <span class="fl">10</span>, base_seed <span class="op">=</span> <span class="fl">12345</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check performance measures, without assuming that any arm is selected in</span></span></span>
<span class="r-in"><span><span class="co"># the inconclusive simulations, with bootstrapped uncertainty measures</span></span></span>
<span class="r-in"><span><span class="co"># (unstable in this example due to the very low number of simulations</span></span></span>
<span class="r-in"><span><span class="co"># summarised):</span></span></span>
<span class="r-in"><span><span class="fu">check_performance</span><span class="op">(</span><span class="va">res</span>, select_strategy <span class="op">=</span> <span class="st">"none"</span>, uncertainty <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>n_boot <span class="op">=</span> <span class="fl">1000</span>, boot_seed <span class="op">=</span> <span class="st">"base"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>               metric      est  err_sd err_mad    lo_ci    hi_ci</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1       n_summarised   10.000   0.000   0.000   10.000   10.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          size_mean 1840.000 162.458 237.216 1520.000 2000.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3            size_sd  505.964 297.470 250.048    0.000  772.873</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        size_median 2000.000  66.847   0.000 2000.000 2000.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5           size_p25 2000.000 362.022   0.000  800.000 2000.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6           size_p75 2000.000   0.000   0.000 2000.000 2000.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7            size_p0  400.000      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8          size_p100 2000.000      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9        sum_ys_mean  369.900  33.912  36.324  293.050  419.500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10         sum_ys_sd  105.352  46.692  56.287   19.191  162.759</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     sum_ys_median  390.000  16.984   4.448  373.000  418.500</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12        sum_ys_p25  376.500  67.721  16.309  152.750  392.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13        sum_ys_p75  408.500  21.318  25.945  388.500  460.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14         sum_ys_p0   84.000      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       sum_ys_p100  466.000      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16     ratio_ys_mean    0.202   0.005   0.005    0.193    0.212</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17       ratio_ys_sd    0.016   0.003   0.003    0.008    0.021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18   ratio_ys_median    0.196   0.006   0.003    0.190    0.210</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19      ratio_ys_p25    0.194   0.005   0.003    0.181    0.200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20      ratio_ys_p75    0.209   0.009   0.009    0.195    0.230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21       ratio_ys_p0    0.180      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     ratio_ys_p100    0.233      NA      NA       NA       NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23   prob_conclusive    0.100   0.102   0.148    0.000    0.300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24     prob_superior    0.100   0.102   0.148    0.000    0.300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25  prob_equivalence    0.000   0.000   0.000    0.000    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26     prob_futility    0.000   0.000   0.000    0.000    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27          prob_max    0.900   0.102   0.148    0.700    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28 prob_select_arm_A    0.000   0.000   0.000    0.000    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29 prob_select_arm_B    0.100   0.102   0.148    0.000    0.300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30 prob_select_arm_C    0.000   0.000   0.000    0.000    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31 prob_select_arm_D    0.000   0.000   0.000    0.000    0.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32  prob_select_none    0.900   0.102   0.148    0.700    1.000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33              rmse    0.023   0.000   0.000    0.023    0.023</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34           rmse_te    0.182   0.000   0.000    0.182    0.182</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35               idp  100.000   0.000   0.000  100.000  100.000</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Anders Granholm, Benjamin Skov Kaas-Hansen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

